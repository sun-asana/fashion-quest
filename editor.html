<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Fashion Quest - Pro Editor with Preview</title>
    <style>
        :root { --p-neon: #00f2ff; --p-grad: linear-gradient(45deg, #00f2ff, #0066ff); }
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: white; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ (–ù–ê–°–¢–†–û–ô–ö–ò) */
        .settings-panel { width: 400px; padding: 20px; background: #1e293b; overflow-y: auto; border-right: 2px solid #334155; box-shadow: 10px 0 30px rgba(0,0,0,0.3); z-index: 10; }
        h2 { color: #38bdf8; text-transform: uppercase; letter-spacing: 1px; font-size: 18px; margin-bottom: 20px; border-bottom: 1px solid #334155; padding-bottom: 10px; }
        h3 { font-size: 12px; color: #64748b; text-transform: uppercase; margin-top: 20px; }
        
        .group { margin-bottom: 12px; }
        label { display: block; margin-bottom: 4px; font-size: 12px; color: #cbd5e1; }
        input, select, textarea { width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #334155; background: #0f172a; color: white; font-size: 13px; }
        .row { display: flex; gap: 10px; }
        
        /* –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ (–ü–†–ï–î–ü–†–û–°–ú–û–¢–†) */
        .preview-panel { flex-grow: 1; position: relative; display: flex; align-items: center; justify-content: center; background: #000; }
        #preview-bg { position: absolute; width: 100%; height: 100%; background-size: cover; background-position: center; transition: 0.5s; }
        
        /* –ö–ù–û–ü–ö–ê –ó–ê–ü–£–°–ö–ê (–ö–ê–ö –í GENIALLY) */
        #start-trigger { position: absolute; top: 20px; left: 20px; padding: 10px 20px; background: rgba(56, 189, 248, 0.2); border: 1px solid #38bdf8; color: #38bdf8; border-radius: 8px; cursor: pointer; font-weight: bold; }

        /* –û–ö–ù–û –ò–ì–†–´ –í –ü–†–ï–í–¨–Æ */
        #mock-modal { 
            width: 80%; max-width: 600px; background: rgba(255,255,255,0.8); backdrop-filter: blur(10px);
            border-radius: 20px; padding: 20px; border: 2px solid var(--p-neon);
            box-shadow: 0 0 20px var(--p-neon); color: #333; position: relative;
        }
        .mock-btn { 
            background: var(--p-grad); color: white; border: none; padding: 10px 20px; 
            border-radius: 50px; font-weight: bold; width: 100%; margin-top: 15px;
        }

        #copy-btn { width: 100%; padding: 15px; background: #38bdf8; color: #000; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<div class="settings-panel">
    <h2>Fashion Quest Editor ‚ú®</h2>
    
    <button id="start-trigger" onclick="alert('–≠—Ç–æ –∫–Ω–æ–ø–∫–∞ –¥–ª—è Genially! –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ —Å–Ω–∏–∑—É –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ —Ç—É–¥–∞.')">‚ú® –ù–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>

    <h3>üìù –ö–æ–Ω—Ç–µ–Ω—Ç</h3>
    <div class="group"><label>–í–æ–ø—Ä–æ—Å</label><textarea id="q" oninput="updatePreview()">1+5</textarea></div>
    <div class="group"><label>–û—Ç–≤–µ—Ç</label><input type="text" id="a" value="6"></div>

    <h3>üé® –î–∏–∑–∞–π–Ω</h3>
    <div class="row">
        <div class="group"><label>–ù–µ–æ–Ω</label><input type="color" id="neonColor" value="#00f2ff" oninput="updatePreview()"></div>
        <div class="group"><label>–¢–µ–∫—Å—Ç</label><input type="color" id="textColor" value="#333333" oninput="updatePreview()"></div>
    </div>
    
    <div class="group">
        <label>–ì—Ä–∞–¥–∏–µ–Ω—Ç –∫–Ω–æ–ø–æ–∫</label>
        <select id="gradient" onchange="updatePreview()">
            <option value="linear-gradient(45deg, #00f2ff, #0066ff)">–°–∏–Ω–∏–π –Ω–µ–æ–Ω</option>
            <option value="linear-gradient(45deg, #ff00ff, #7000ff)">–†–æ–∑–æ–≤—ã–π –Ω–µ–æ–Ω</option>
            <option value="linear-gradient(45deg, #ccff00, #009432)">–ö–∏—Å–ª–æ—Ç–Ω—ã–π –ª–∞–π–º</option>
        </select>
    </div>

    <div class="group">
        <label>–§–æ–Ω</label>
        <select id="bgImage" onchange="updatePreview()">
            <option value="">–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π (Genially)</option>
            <option value="bg_space">–ó–≤–µ–∑–¥–Ω–∞—è –ø—ã–ª—å</option>
            <option value="bg_cyber">–ö–∏–±–µ—Ä–ø–∞–Ω–∫</option>
            <option value="bg_watercolor">–ê–∫–≤–∞—Ä–µ–ª—å</option>
        </select>
    </div>

    <div class="group">
        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
        <select id="shopType"><option value="top">–í–µ—Ä—Ö</option><option value="bottom">–ù–∏–∑</option></select>
    </div>

    <button id="copy-btn" onclick="generateCode()">–°–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î</button>
</div>

<div class="preview-panel">
    <div id="preview-bg"></div>
    <div id="mock-modal">
        <div style="text-align: center; font-size: 10px; color: #666; margin-bottom: 10px;">–ü–†–ï–î–ü–†–û–°–ú–û–¢–†</div>
        <div id="p-question" style="text-align: center; font-size: 18px; font-weight: bold;">1+5</div>
        <input type="text" placeholder="–û—Ç–≤–µ—Ç..." style="width: 100%; margin-top: 10px; padding: 8px; border: 1px solid #ccc; border-radius: 8px; text-align: center;">
        <button class="mock-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
    </div>
</div>

<script>
    function updatePreview() {
        const neon = document.getElementById('neonColor').value;
        const grad = document.getElementById('gradient').value;
        const text = document.getElementById('textColor').value;
        const bg = document.getElementById('bgImage').value;
        const qText = document.getElementById('q').value;

        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ –ø—Ä–µ–≤—å—é
        const modal = document.getElementById('mock-modal');
        modal.style.borderColor = neon;
        modal.style.boxShadow = `0 0 20px ${neon}`;
        modal.style.color = text;
        
        document.getElementById('p-question').innerText = qText;
        
        const btn = document.querySelector('.mock-btn');
        btn.style.background = grad;

        const bgPanel = document.getElementById('preview-bg');
        if(bg) {
            bgPanel.style.backgroundImage = `url('assets/backgrounds/${bg}.png')`;
            bgPanel.style.opacity = "1";
        } else {
            bgPanel.style.backgroundImage = "none";
            bgPanel.style.backgroundColor = "#222";
        }
    }

    function generateCode() {
        const data = {
            type: 'openTask',
            q: document.getElementById('q').value,
            a: document.getElementById('a').value,
            time: 30,
            shopType: document.getElementById('shopType').value,
            neonColor: document.getElementById('neonColor').value,
            textColor: document.getElementById('textColor').value,
            btnGradient: document.getElementById('gradient').value,
            bgImage: document.getElementById('bgImage').value,
            transparent: document.getElementById('bgImage').value === ""
        };
        const code = `window.parent.postMessage(${JSON.stringify(data)}, '*');`;
        navigator.clipboard.writeText(code);
        alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
    }
    
    updatePreview();
</script>
</body>
</html>
