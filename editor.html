<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Fashion Quest: PRO Editor</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #fff5f8; padding: 20px; display: flex; justify-content: center; }
        .editor-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 550px; }
        h2 { color: #ff4081; text-align: center; margin-top: 0; }
        label { font-weight: 600; display: block; margin-top: 15px; color: #555; }
        input, select { width: 100%; padding: 12px; margin-top: 5px; border: 2px solid #ffe0ea; border-radius: 10px; box-sizing: border-box; font-size: 14px; }
        
        #drop-zone {
            border: 2px dashed #ff4081;
            padding: 20px;
            text-align: center;
            border-radius: 15px;
            margin-top: 10px;
            background: #fff9fb;
            color: #ff4081;
            cursor: pointer;
            transition: 0.3s;
        }
        #drop-zone.hover { background: #ffe4ee; }
        #preview-img { max-width: 100%; max-height: 150px; margin-top: 10px; display: none; border-radius: 10px; }

        #gen-btn { width: 100%; padding: 15px; background: #ff4081; color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 25px; box-shadow: 0 4px 15px rgba(255,64,129,0.3); }
        
        /* –ë–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π */
        .result-container { position: relative; margin-top: 15px; display: none; }
        code { display: block; background: #2d3436; color: #fab1a0; padding: 15px; border-radius: 10px; font-size: 10px; white-space: pre-wrap; max-height: 150px; overflow-y: auto; border: 1px solid #636e72; }
        
        #copy-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ff4081;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }
        #copy-btn:hover { background: #e91e63; transform: scale(1.05); }
        #copy-btn.success { background: #4CAF50; }
    </style>
</head>
<body>
    <div class="editor-card">
        <h2>üëó –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Fashion Quest</h2>
        
        <label>–í–æ–ø—Ä–æ—Å:</label>
        <input type="text" id="q" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2+3">
        
        <label>–ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞–¥–∞–Ω–∏—è (–ø–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞):</label>
        <div id="drop-zone">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</div>
        <input type="file" id="file-input" style="display:none" accept="image/*">
        <center><img id="preview-img"></center>

        <label>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</label>
        <input type="text" id="a" placeholder="–û—Ç–≤–µ—Ç">

        <label>–í—Ä–µ–º—è –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ (—Å–µ–∫):</label>
        <input type="number" id="timer" value="30">

        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ:</label>
        <select id="type">
            <option value="top">–í–µ—Ä—Ö (–û–¥–µ–∂–¥–∞)</option>
            <option value="bottom">–ù–∏–∑ (–ë—Ä—é–∫–∏/–Æ–±–∫–∏)</option>
            <option value="shoes">–û–±—É–≤—å</option>
            <option value="acc">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</option>
        </select>

        <button id="gen-btn" onclick="generate()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è Genially</button>
        
        <div id="result" class="result-container">
            <label>–ö–æ–¥ –≥–æ—Ç–æ–≤:</label>
            <button id="copy-btn" onclick="copyCode()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
            <code id="out"></code>
        </div>
    </div>

    <script>
        let base64Image = "";
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const preview = document.getElementById('preview-img');

        dropZone.onclick = () => fileInput.click();
        dropZone.ondragover = (e) => { e.preventDefault(); dropZone.classList.add('hover'); };
        dropZone.ondragleave = () => dropZone.classList.remove('hover');
        dropZone.ondrop = (e) => {
            e.preventDefault();
            dropZone.classList.remove('hover');
            handleFile(e.dataTransfer.files[0]);
        };

        fileInput.onchange = (e) => handleFile(e.target.files[0]);

        function handleFile(file) {
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                base64Image = e.target.result;
                preview.src = base64Image;
                preview.style.display = "block";
                dropZone.innerText = "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ ‚ú®";
            };
            reader.readAsDataURL(file);
        }

        function generate() {
            const q = document.getElementById('q').value;
            const a = document.getElementById('a').value;
            const type = document.getElementById('type').value;
            const time = document.getElementById('timer').value;
            const url = "https://sun-asana.github.io/fashion-quest/index.html";
            
            const code = `<div style="width:100%;height:100%"><iframe src="${url}" style="width:100%;height:100%;border:none;position:fixed;top:0;left:0;pointer-events:none;z-index:9999" id="fq-engine"></iframe><button style="background:#ff4081;color:#fff;border:none;padding:15px 30px;border-radius:50px;font-family:sans-serif;font-weight:700;cursor:pointer;pointer-events:auto;box-shadow: 0 4px 15px rgba(255,64,129,0.4)" onclick="const e=document.getElementById('fq-engine');e.style.pointerEvents='auto';e.contentWindow.postMessage({type:'openTask',q:'${q}',a:'${a}',time:${time},img:'${base64Image}',shopType:'${type}'},'*')">‚ú® –ü—Ä–æ–π—Ç–∏ –∑–∞–¥–∞–Ω–∏–µ ‚ú®</button></div>`;
            
            document.getElementById('out').innerText = code;
            document.getElementById('result').style.display = 'block';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            const copyBtn = document.getElementById('copy-btn');
            copyBtn.innerText = "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥";
            copyBtn.classList.remove('success');
        }

        function copyCode() {
            const codeText = document.getElementById('out').innerText;
            const btn = document.getElementById('copy-btn');
            
            navigator.clipboard.writeText(codeText).then(() => {
                btn.innerText = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ! ‚úÖ";
                btn.classList.add('success');
                setTimeout(() => {
                    btn.innerText = "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥";
                    btn.classList.remove('success');
                }, 2000);
            });
        }
    </script>
</body>
</html>
