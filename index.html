<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="fq-overlay" class="hidden">
        <div id="fq-modal">
            <h2 id="modal-title"></h2>
            <div id="modal-content"></div>
            <div id="modal-footer">
                 <button id="modal-btn">–û–ö</button>
            </div>
        </div>
    </div>

    <script src="engine.js"></script>
    <script>
        const overlay = document.getElementById('fq-overlay');
        const content = document.getElementById('modal-content');
        const title = document.getElementById('modal-title');
        const btn = document.getElementById('modal-btn');

        // –§–£–ù–ö–¶–ò–Ø –ó–ê–î–ê–ù–ò–Ø
        window.openTask = function(question, correctAnswer, reward) {
            title.innerText = "Fashion –í–æ–ø—Ä–æ—Å";
            content.innerHTML = `<p>${question}</p><input type="text" id="user-answer" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç...">`;
            overlay.classList.remove('hidden');
            
            btn.onclick = function() {
                const val = document.getElementById('user-answer').value;
                if(val.toLowerCase().trim() === correctAnswer.toLowerCase().trim()) {
                    window.FQ.addMoney(reward);
                    alert("–í–µ—Ä–Ω–æ! –ù–∞—á–∏—Å–ª–µ–Ω–æ " + reward);
                    // –ü–æ—Å–ª–µ –≤–µ—Ä–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ ‚Äî —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–∞–≥–∞–∑–∏–Ω!
                    window.openShop(); 
                } else {
                    alert("–£–ø—Å! –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑.");
                }
            };
        };

        // –§–£–ù–ö–¶–ò–Ø –ú–ê–ì–ê–ó–ò–ù–ê
        window.openShop = function() {
            title.innerText = "–ì–∞—Ä–¥–µ—Ä–æ–±";
            // –ü—Ä–∏–º–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ (–ø–æ—Ç–æ–º –≤—ã–Ω–µ—Å–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥)
            const items = [
                {id: 'shoes_1', name: '–ö–µ–¥—ã', price: 100},
                {id: 'top_1', name: '–•—É–¥–∏', price: 200}
            ];
            
            let html = `<p>–¢–≤–æ–π –±–∞–ª–∞–Ω—Å: <b>${window.FQ.money}</b></p><div class="shop-grid">`;
            items.forEach(item => {
                const isBought = window.FQ.inventory.includes(item.id);
                html += `
                    <div class="shop-item">
                        <p>${item.name}</p>
                        <p>${item.price} üí∞</p>
                        <button onclick="buy('${item.id}', ${item.price})" ${isBought ? 'disabled' : ''}>
                            ${isBought ? '–ö—É–ø–ª–µ–Ω–æ' : '–ö—É–ø–∏—Ç—å'}
                        </button>
                    </div>`;
            });
            html += `</div>`;
            content.innerHTML = html;
            btn.innerText = "–ó–∞–∫—Ä—ã—Ç—å";
            btn.onclick = () => overlay.classList.add('hidden');
        };

        function buy(id, price) {
            if(window.FQ.buyItem(id, price)) {
                window.openShop(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
            }
        }
    </script>
</body>
</html>
